<!DOCTYPE html>
<!-- https://interactive-examples.mdn.mozilla.net/pages/tabbed/video.html -->

<!-- [GitHub]: https://lqmeta.github.io/examples/mozilla-dom-examples/pages/tabbed/video.html -->
<!-- [DevCloud]: http://9.135.228.146/examples/mozilla-dom-examples/pages/tabbed/video.html -->
<!-- [toronto]: http://49.51.98.176/examples/mozilla-dom-examples/pages/tabbed/video.html -->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <video id="myVideo" controls width="250">
    <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm" type="video/webm" />
  
    <source src="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4" type="video/mp4" />
  
    Download the
    <a href="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.webm">WEBM</a>
    or
    <a href="https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4">MP4</a>
    video.
  </video>
</body>
  <script>
    var video = document.getElementById('myVideo');

    video.addEventListener("abort", () => {
      console.log(`[abort] Abort loading: ${videoSrc}`);
    });
    video.addEventListener("canplay", (event) => {
      console.log("[canplay] Video can start, but not sure it will play through.");
    });

    video.addEventListener('canplaythrough', function() {
      console.log('[canplaythrough] The video is fully loaded and can play through without interruption!');
    });

    video.addEventListener("durationchange", (event) => {
      console.log("[durationchange] Not sure why, but the duration of the video has changed.");
    });

    video.addEventListener("emptied", (event) => {
      console.log("[emptied] Uh oh. The media is empty. Did you call load()?");
    });

    video.addEventListener("encrypted", (event) => {
      console.log("[encrypted] ");
    });

    video.addEventListener("ended", (event) => {
      console.log(
        "[ended] Video stopped either because it has finished playing or no further data is available.",
      );
    });

    video.addEventListener("error", () => {
      console.error(`[error] Error loading: ${videoSrc}`);
    });

    video.addEventListener("loadeddata", (event) => {
      console.log(
        "[loadeddata] Yay! The readyState just increased to  " +
          "HAVE_CURRENT_DATA or greater for the first time.",
      );
    });

    video.addEventListener("loadedmetadata", (event) => {
      console.log(
        "[loadedmetadata] The duration and dimensions of the media and tracks are now known.",
      );
    });

    video.addEventListener("loadstart", (event) => {
      console.log("[loadstart] ");
    });

    video.addEventListener("pause", (event) => {
      console.log(
        "[pause] The Boolean paused property is now 'true'. Either the pause() method was called or the autoplay attribute was toggled.",
      );
    });

    video.addEventListener("playing", (event) => {
      console.log("[playing] Video is no longer paused");
    });

    video.addEventListener("ratechange", (event) => {
      console.log("[ratechange] The playback rate changed.");
    });


    video.addEventListener("play", (event) => {
      console.log(
        "[play] The Boolean paused property is now 'false'. Either the play() method was called or the autoplay attribute was toggled.",
      );
    });

    video.addEventListener("seeked", (event) => {
      console.log("[seeked] Video found the playback position it was looking for.");
    });

    video.addEventListener("seeking", (event) => {
      console.log("[seeking] Video is seeking a new position.");
    });

    video.addEventListener("stalled", (event) => {
      console.log("[stalled] Failed to fetch data, but trying.");
    });

    video.addEventListener("suspend", (event) => {
      console.log("[suspend] Data loading has been suspended.");
    });
    video.addEventListener("timeupdate", (event) => {
      console.log("[timeupdate] The currentTime attribute has been updated. Again.");
    });
    video.addEventListener("volumechange", (event) => {
      console.log("[volumechange] The volume changed.");
    });
    video.addEventListener("waiting", (event) => {
      console.log("[waiting] Video is waiting for more data.");
    });


    video.addEventListener('progress', function() {
      console.log('[progress]:', video.buffered, video.duration);

      var buffered = video.buffered;
      if (buffered.length) {
        var loaded = buffered.end(buffered.length - 1);
        var total = video.duration;

        var percentage = (loaded / total) * 100;
        console.log('Buffering: ' + percentage.toFixed(2) + '%');
      }
    });
  </script>
</html>